<%=

  params = {
    'cloud' => {
      'plugin' => 'aliyun',
      'properties' => {
        'aliyun' => {
          'RegionId' => p('aliyun.region_id'),
          'InstanceType' => p('aliyun.instance_type'),
          'ImageId' => p('aliyun.image_id'),
          'SecurityGroupId' => p('aliyun.security_group_id'),
          'InternetChargeType' => p('aliyun.internet_charge_type'),
          'InternetMaxBandwidthOut' => p('aliyun.internet_max_band_width_out'),
          'InstanceName' => p('aliyun.instance_name'),
          'DataDisk1Size' => p('aliyun.data_disk_1_size'),
          'Description' => p('aliyun.desc'),
          'HostName' => p('aliyun.hostname'),
          'Password' => p('aliyun.password'),
          'AccessKeyId' => p('aliyun.access_key_id'),
          'AccessKey' => p('aliyun.access_key'),
          'DiskSnapShotId' => p('aliyun.disk_snapshot_id')
        },
        'registry' => {
          'user' => p('registry.username'),
          'password' => p('registry.password'),
          'endpoint' => "http://#{p('registry.address')}:#{p('registry.port')}",
        },
        'agent' => {
          'ntp' => p('ntp'),
          'mbus' => "nats://#{p('nats.user')}:#{p('nats.password')}@#{p('nats.address')}:#{p('nats.port')}",
          'blobstore' => {
            'provider' => p('blobstore.provider'),
            'options' => {
              'endpoint' => "http://#{p('blobstore.address')}:#{p('blobstore.port')}",
              'user' => p('blobstore.agent.user'),
              'password' => p('blobstore.agent.password')
            }
          },
        }
      }
    }
  }

  JSON.dump(params)
%>
